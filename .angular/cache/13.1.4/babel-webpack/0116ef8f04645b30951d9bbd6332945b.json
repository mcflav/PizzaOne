{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nlet LoginComponent = class LoginComponent {\n  constructor(usersServices, router, route, dataStorageServices) {\n    this.usersServices = usersServices;\n    this.router = router;\n    this.route = route;\n    this.dataStorageServices = dataStorageServices;\n    this.users = [];\n    this.login = {\n      email: '',\n      password: ''\n    };\n    this.isLoading = false;\n    this.userValid = false;\n    this.error = null;\n  }\n\n  ngOnInit() {\n    this.dataStorageServices.fetchUsers().subscribe(data => {\n      if (data !== null) {\n        this.usersServices.setUsers(data);\n      }\n    }, errorMessage => {\n      this.error = errorMessage;\n    });\n  }\n\n  onSubmit() {\n    this.isLoading = true;\n    this.login.email = this.loginForm.value.email;\n    this.login.password = this.loginForm.value.password;\n    this.dataStorageServices.validateUser({\n      email: this.login.email,\n      password: this.login.password\n    }).subscribe(data => {\n      console.log(data.auth);\n      this.isLoading = false;\n      this.error = null;\n      this.isUserValid(data.auth);\n    }, errorMessage => {\n      this.error = errorMessage;\n      this.isLoading = false;\n    });\n  }\n\n  isUserValid(isValid) {\n    this.userValid = isValid;\n\n    if (this.userValid) {\n      this.users = this.usersServices.getUsers();\n\n      for (var i = 0; i < this.users.length; i++) {\n        if (this.users[i].email === this.login.email) {\n          this.id = this.users[i]._id;\n          this.firstname = this.users[i].firstname;\n          this.lastname = this.users[i].lastname;\n        }\n      }\n\n      this.router.navigate(['../orders', this.login.email, this.firstname, this.lastname, this.id], {\n        relativeTo: this.route\n      });\n    }\n  }\n\n  onHandleError() {\n    this.error = null;\n  }\n\n};\n\n__decorate([ViewChild('f')], LoginComponent.prototype, \"loginForm\", void 0);\n\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module"}